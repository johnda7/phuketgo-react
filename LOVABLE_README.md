# üé® LOVABLE: –ò–ù–°–¢–†–£–ö–¶–ò–Ø –ü–û –°–ò–ù–•–†–û–ù–ò–ó–ê–¶–ò–ò –° DIRECTUS

> **–î–ª—è Lovable AI:** –ü—Ä–æ—á–∏—Ç–∞–π —ç—Ç–æ—Ç —Ñ–∞–π–ª –ü–ï–†–í–´–ú! –ó–¥–µ—Å—å –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

## ‚úÖ –ß–¢–û –£–ñ–ï –°–î–ï–õ–ê–ù–û (–í GITHUB)

### 1. Directus Backend –ó–ê–ü–£–©–ï–ù –ò –†–ê–ë–û–¢–ê–ï–¢

```yaml
URL: http://localhost:8055
Admin: http://localhost:8055/admin
Email: admin@phuketgo.com
Password: PhuketGo2025!
–°—Ç–∞—Ç—É—Å: ‚úÖ –ó–∞–ø—É—â–µ–Ω –ª–æ–∫–∞–ª—å–Ω–æ, 10 —Ç—É—Ä–æ–≤ –≤ –±–∞–∑–µ
```

### 2. –§–∞–π–ª—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –°–û–ó–î–ê–ù–´

```
‚úÖ src/lib/directus.ts - –ö–ª–∏–µ–Ω—Ç Directus SDK + —Ç–∏–ø—ã
‚úÖ src/hooks/useDirectusTours.ts - React —Ö—É–∫–∏ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ç—É—Ä–æ–≤
‚úÖ src/App.jsx - –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Directus API
‚úÖ .env.local - VITE_DIRECTUS_URL=http://localhost:8055
‚úÖ package.json - @directus/sdk —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
```

### 3. API —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞:
curl http://localhost:8055/items/tours | jq '.data | length'
# –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: 10
```

---

## üî¥ –ü–†–û–ë–õ–ï–ú–ê: LOVABLE –ù–ï –í–ò–î–ò–¢ –§–ê–ô–õ–´

### –ü–æ—á–µ–º—É Lovable –Ω–µ –≤–∏–¥–∏—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é:

1. **GitHub —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –Ω—É–∂–Ω–æ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ push
2. **`.env.local` –≤ .gitignore** - –Ω–µ –ø—É—à–∏—Ç—Å—è –≤ GitHub (–ø—Ä–∞–≤–∏–ª—å–Ω–æ!)
3. **–õ–æ–∫–∞–ª—å–Ω—ã–π Directus** - —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ localhost:8055
4. **Lovable –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ localhost** - –Ω—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π URL

---

## üéØ –ß–¢–û –ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –í LOVABLE

### –í–ê–†–ò–ê–ù–¢ 1: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–æ–¥ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–§–∞–π–ª—ã –£–ñ–ï –≤ GitHub, –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–∏:**

1. **–û–±–Ω–æ–≤–∏ —Ä–∞–±–æ—á—É—é –æ–±–ª–∞—Å—Ç—å** (GitHub sync –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å 1-2 –º–∏–Ω—É—Ç—ã)
   ```
   Lovable ‚Üí –û–±–Ω–æ–≤–∏—Ç—å –∏–∑ GitHub
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ñ–∞–π–ª—ã –ø–æ—è–≤–∏–ª–∏—Å—å:**
   ```
   src/lib/directus.ts ‚úÖ
   src/hooks/useDirectusTours.ts ‚úÖ
   src/App.jsx ‚úÖ (–æ–±–Ω–æ–≤–ª–µ–Ω)
   ```

3. **–°–æ–∑–¥–∞–π Environment Variables –≤ Lovable:**
   ```
   VITE_DIRECTUS_URL=https://—Ç–≤–æ–π-directus.app
   ```

4. **Directus –Ω—É–∂–Ω–æ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å –ø—É–±–ª–∏—á–Ω–æ** (—Å–º. –í–ê–†–ò–ê–ù–¢ 2)

---

### –í–ê–†–ò–ê–ù–¢ 2: –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å Directus (–¥–ª—è —Ä–∞–±–æ—Ç—ã Lovable)

**–ü—Ä–æ–±–ª–µ–º–∞:** Directus –Ω–∞ localhost:8055 - Lovable –Ω–µ –º–æ–∂–µ—Ç –∫ –Ω–µ–º—É –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è

**–†–µ—à–µ–Ω–∏–µ:** –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å Directus –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥

#### –û–ø—Ü–∏—è A: Directus Cloud (–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π, –ü–ª–∞—Ç–Ω—ã–π)
```
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ https://directus.cloud
2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
3. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ö–µ–º—É (–∏–∑ create-tours-table.sql)
4. –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ (–∏–∑ import-tours-direct.sql)
5. URL –±—É–¥–µ—Ç: https://—Ç–≤–æ–π-–ø—Ä–æ–µ–∫—Ç.directus.app
```

#### –û–ø—Ü–∏—è B: Railway.app (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π Trial)
```
1. Railway.app ‚Üí New Project
2. Deploy from GitHub (phuketgo-directus)
3. Add Environment Variables:
   - KEY, SECRET, ADMIN_EMAIL, ADMIN_PASSWORD
4. URL –±—É–¥–µ—Ç: https://—Ç–≤–æ–π-–ø—Ä–æ–µ–∫—Ç.railway.app
```

#### –û–ø—Ü–∏—è C: Render.com (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π)
```
1. Render.com ‚Üí New Web Service
2. Connect GitHub (phuketgo-directus)
3. Environment: Node
4. Build: npm install
5. Start: npx directus start
6. URL –±—É–¥–µ—Ç: https://—Ç–≤–æ–π-–ø—Ä–æ–µ–∫—Ç.onrender.com
```

---

### –í–ê–†–ò–ê–ù–¢ 3: –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (API Proxy)

–ï—Å–ª–∏ –Ω–µ —Ö–æ—á–µ—à—å –¥–µ–ø–ª–æ–∏—Ç—å Directus –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å:

**–°–æ–∑–¥–∞–π Edge Function –≤ Lovable:**

```typescript
// supabase/functions/tours/index.ts
import { serve } from "https://deno.land/std@0.168.0/http/server.ts"

serve(async (req) => {
  // –ü—Ä–æ–∫—Å–∏—Ä—É–µ–º –∑–∞–ø—Ä–æ—Å—ã –∫ localhost Directus
  // –í–ù–ò–ú–ê–ù–ò–ï: –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ Directus –ø—É–±–ª–∏—á–Ω–æ –¥–æ—Å—Ç—É–ø–µ–Ω!
  
  const directusUrl = 'http://localhost:8055' // –ó–∞–º–µ–Ω–∏ –Ω–∞ –ø—É–±–ª–∏—á–Ω—ã–π URL
  
  const response = await fetch(`${directusUrl}/items/tours`)
  const data = await response.json()
  
  return new Response(
    JSON.stringify(data),
    { headers: { "Content-Type": "application/json" } }
  )
})
```

–ù–æ **—ç—Ç–æ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç —Å localhost!** –ù—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π URL.

---

## üìã –ü–û–®–ê–ì–û–í–´–ô –ü–õ–ê–ù –î–õ–Ø LOVABLE

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é —Å GitHub

```
–í Lovable:
1. Settings ‚Üí GitHub ‚Üí Refresh
2. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –∫–æ–º–º–∏—Ç 43170e5 –ø–æ—è–≤–∏–ª—Å—è
3. –ü—Ä–æ–≤–µ—Ä—å —Ñ–∞–π–ª—ã:
   - src/lib/directus.ts (131 —Å—Ç—Ä–æ–∫–∞)
   - src/hooks/useDirectusTours.ts (53 —Å—Ç—Ä–æ–∫–∏)
   - src/App.jsx (–æ–±–Ω–æ–≤–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç useDirectusTours)
```

### –®–∞–≥ 2: –ó–∞–¥–µ–ø–ª–æ–π Directus (–≤—ã–±–µ—Ä–∏ —Å–ø–æ—Å–æ–±)

```
–†–µ–∫–æ–º–µ–Ω–¥—É—é Railway.app (–±–µ—Å–ø–ª–∞—Ç–Ω—ã–π trial):
1. Railway.app ‚Üí Deploy
2. –ü–æ–ª—É—á–∏ URL: https://xxx.railway.app
3. –ü—Ä–æ–≤–µ—Ä—å: curl https://xxx.railway.app/items/tours
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Lovable

```
–í Lovable:
1. Settings ‚Üí Environment Variables
2. –î–æ–±–∞–≤—å:
   VITE_DIRECTUS_URL=https://—Ç–≤–æ–π-directus.railway.app
3. Redeploy –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

```
–í Lovable Preview:
1. –û—Ç–∫—Ä–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ö–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –î–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è 10 —Ç—É—Ä–æ–≤ –∏–∑ Directus
4. –ù–µ—Ç –æ—à–∏–±–æ–∫ CORS –∏–ª–∏ 404
```

---

## üîç –ö–ê–ö –ü–†–û–í–ï–†–ò–¢–¨ –ß–¢–û –í–°–ï –†–ê–ë–û–¢–ê–ï–¢

### 1. –õ–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω Directus)

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8055/items/tours | jq '.data | length'
# ‚Üí 10

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
npm run dev
# –û—Ç–∫—Ä—ã—Ç—å http://localhost:5173
# DevTools ‚Üí Network ‚Üí tours –∑–∞–ø—Ä–æ—Å ‚Üí Status 200
```

### 2. –í Lovable (–ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è Directus)

```
Lovable Preview:
1. DevTools (F12) ‚Üí Console
2. –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ "Failed to fetch"
3. Network ‚Üí tours ‚Üí Status 200
4. –¢—É—Ä—ã –¥–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
```

---

## üìÅ –°–¢–†–£–ö–¢–£–†–ê –§–ê–ô–õ–û–í (–£–ñ–ï –í GITHUB)

```
phuketgo-react/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ directus.ts ‚úÖ –ö–ª–∏–µ–Ω—Ç SDK + —Ç–∏–ø—ã Tour, Booking
‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useDirectusTours.ts ‚úÖ useDirectusTours(), useDirectusTour()
‚îÇ   ‚îú‚îÄ‚îÄ App.jsx ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç useDirectusTours
‚îÇ   ‚îî‚îÄ‚îÄ components/
‚îÇ       ‚îî‚îÄ‚îÄ tours/
‚îÇ           ‚îî‚îÄ‚îÄ TourCard.jsx ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Ç—É—Ä–æ–≤
‚îú‚îÄ‚îÄ .env.local ‚ùå –ù–ï –≤ git (–ª–æ–∫–∞–ª—å–Ω—ã–π)
‚îú‚îÄ‚îÄ .env.example ‚úÖ –®–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ package.json ‚úÖ @directus/sdk: ^20.1.0
‚îî‚îÄ‚îÄ AGENT_GUIDELINES.md ‚úÖ –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üö® –í–ê–ñ–ù–û –î–õ–Ø LOVABLE AI

### –ß—Ç–æ –£–ñ–ï —Å–¥–µ–ª–∞–Ω–æ (–ù–ï –¥–µ–ª–∞–π –∑–∞–Ω–æ–≤–æ):

- ‚úÖ @directus/sdk —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- ‚úÖ –ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω (src/lib/directus.ts)
- ‚úÖ –•—É–∫–∏ —Å–æ–∑–¥–∞–Ω—ã (src/hooks/useDirectusTours.ts)
- ‚úÖ App.jsx –æ–±–Ω–æ–≤–ª–µ–Ω
- ‚úÖ 10 —Ç—É—Ä–æ–≤ –≤ Directus –±–∞–∑–µ
- ‚úÖ API —Ä–∞–±–æ—Ç–∞–µ—Ç (–ª–æ–∫–∞–ª—å–Ω–æ)

### –ß—Ç–æ –ù–£–ñ–ù–û —Å–¥–µ–ª–∞—Ç—å:

1. ‚è≥ –î–æ–∂–¥–∞—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ GitHub (1-2 –º–∏–Ω—É—Ç—ã)
2. üöÄ –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å Directus –ø—É–±–ª–∏—á–Ω–æ
3. üîß –î–æ–±–∞–≤–∏—Ç—å VITE_DIRECTUS_URL –≤ Lovable Environment Variables
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ —Ç—É—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### –ß—Ç–æ –ù–ï –ù–£–ñ–ù–û –¥–µ–ª–∞—Ç—å:

- ‚ùå –ü–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å src/lib/directus.ts
- ‚ùå –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ API endpoints
- ‚ùå –ú–µ–Ω—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- ‚ùå –£–¥–∞–ª—è—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã

---

## üí° –ë–´–°–¢–†–´–ô –°–¢–ê–†–¢

**–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å—Ä–∞–∑—É —É–≤–∏–¥–µ—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

```bash
# 1. –õ–æ–∫–∞–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏ –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞
Terminal 1: cd phuketgo-directus && npx directus start
Terminal 2: cd phuketgo-react && npm run dev

# 2. –û—Ç–∫—Ä–æ–π http://localhost:5173
# 3. DevTools ‚Üí Network ‚Üí –≤–∏–¥–∏—à—å –∑–∞–ø—Ä–æ—Å –∫ /items/tours
# 4. –¢—É—Ä—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ Directus ‚úÖ
```

**–î–ª—è —Ä–∞–±–æ—Ç—ã –≤ Lovable:**
- –ù—É–∂–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–π URL Directus
- –ò—Å–ø–æ–ª—å–∑—É–π Railway.app –∏–ª–∏ Render.com (–±–µ—Å–ø–ª–∞—Ç–Ω–æ)

---

## üìû –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –†–ê–ë–û–¢–ê–ï–¢

### –û—à–∏–±–∫–∞: "Cannot find module '@directus/sdk'"
```bash
–†–µ—à–µ–Ω–∏–µ: npm install
```

### –û—à–∏–±–∫–∞: "VITE_DIRECTUS_URL is not defined"
```bash
–†–µ—à–µ–Ω–∏–µ: –°–æ–∑–¥–∞–π .env.local —Å VITE_DIRECTUS_URL=http://localhost:8055
–ò–ª–∏ –¥–æ–±–∞–≤—å –≤ Lovable Environment Variables
```

### –û—à–∏–±–∫–∞: "Failed to fetch" / CORS
```bash
–†–µ—à–µ–Ω–∏–µ: 
1. Directus –¥–æ–ª–∂–µ–Ω —Ä–∞–∑—Ä–µ—à–∏—Ç—å CORS –¥–ª—è Lovable –¥–æ–º–µ–Ω–∞
2. –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π Edge Function –∫–∞–∫ –ø—Ä–æ–∫—Å–∏
```

### –û—à–∏–±–∫–∞: "You don't have permission"
```bash
–†–µ—à–µ–Ω–∏–µ: –ü—Ä–æ–≤–µ—Ä—å –ø—É–±–ª–∏—á–Ω—ã–µ –ø—Ä–∞–≤–∞ –≤ Directus:
sqlite3 data.db "SELECT * FROM directus_permissions WHERE collection='tours';"
–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∞ —Å action='read'
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 1 –æ–∫—Ç—è–±—Ä—è 2025, 21:30 MSK  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å Directus ‚Üí –û–±–Ω–æ–≤–∏—Ç—å VITE_DIRECTUS_URL ‚Üí –†–∞–¥–æ–≤–∞—Ç—å—Å—è! üéâ
